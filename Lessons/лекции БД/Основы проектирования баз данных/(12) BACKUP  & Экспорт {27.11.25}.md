# **BACKUP-ДАМП-Резервная копия**
---

`BACKUP DATABASE <Имя БД> TO DISK = 'p824.bak' GO`

Находится на диск С Programs files -> MS server -> Express


`RESTORE DATABASE <Имя БД> FROM DISK = 'p824.bak'` - Восстановление бекапа ^7e2402


# Экспорт
Через процедуру *xp_cmdshell*: `EXEC xp_cmdshell 'bcp <Название БД>.dbo.<Из какой таблицы будет экспорт> out "<Путь экспорта> + <Его название>.csv" -w -t, -T -S <Название Сервера>'; GO`
![[Pasted image 20251129103630.png]]
`-t,` - Разделитель **(Если в Таблице используется запятая, то лучше юзать тире)**

Выдаст ошибку при экспорте в первый раз *(запрещен доступ к CMD)*:
1) **Для начала:**
![[Pasted image 20251129103543.png]]
2) **Команда для исправления**
![[Pasted image 20251129103357.png]]
3) Общий вид:
![[Pasted image 20251129103842.png]]

### После экспорта
1) Заходим по пути экспорта и проверяем файл.

# Импорт
Через процедуру *xp_cmdshell*: `EXEC xp_cmdshell 'bcp <Название БД>.dbo.<Из какой таблицы будет экспорт> in "<Путь экспорта> + <Его название>.csv" -w -t, -T -S <Название Сервера>'; GO`
![[Pasted image 20251129104503.png]]

# Бекап через интерфейс:
![[Pasted image 20251129104742.png]]
![[Pasted image 20251129104811.png]]
![[Pasted image 20251129104817.png]]

Выбор места бекапа (Паблик юзер)
![[Pasted image 20251129104851.png]]

Удаляем лишний путь:
![[Pasted image 20251129105001.png]]

![[Pasted image 20251129105019.png]]

# Восстановление Бекапа через интерфейс:
![[Pasted image 20251129105140.png]]
![[Pasted image 20251129105229.png]]
![[Pasted image 20251129105308.png]]
![[Pasted image 20251129105315.png]]
ВСЕ

# Импорт и экспорт через GUI:
### Экспорт
![[Pasted image 20251129105447.png]]
![[Pasted image 20251129105503.png]]
![[Pasted image 20251129105559.png]]
![[Pasted image 20251129105618.png]]

Имя сервера, виндов аунтеф, доверять сертификату и выбрать БД, проверить соединение
![[Pasted image 20251129105739.png]]

![[Pasted image 20251129105931.png]]

Куда сохранить (файл excel)
![[Pasted image 20251129105949.png]]
![[Pasted image 20251129110036.png]]
![[Pasted image 20251129110232.png]]

Какую таблицу экспортировать:
![[Pasted image 20251129110437.png]]
#### Дальше везде NEXT
#### **FINISHHH**
---
# Импорт:
![[Pasted image 20251129110653.png]]
![[Pasted image 20251129110718.png]]
![[Pasted image 20251129110734.png]]
![[Pasted image 20251129110815.png]]
![[Pasted image 20251129110903.png]]

**Выбираем без знака $**
![[Pasted image 20251129110915.png]]
![[Pasted image 20251129110934.png]]
![[Pasted image 20251129110940.png]]

Назначение PK изменяем на пропустить той таблицы, которую импортируем
![[Pasted image 20251129111025.png]]
![[Pasted image 20251129111100.png]]


**Если ошибка**
![[Pasted image 20251129111127.png]]

**Если бы не было уникальных ключей было бы все хорошо (Желательно выбрать таблицу без уникальных ключей)**
![[Pasted image 20251129111152.png]]

Или же удалить данные из таблицы (`DELETE FROM <Название таблицы>`):
![[Pasted image 20251129111406.png]]


